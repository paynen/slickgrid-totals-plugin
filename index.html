<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print"/>

    <link rel="stylesheet" href="bower_components/slickgrid/slick.grid.css" type="text/css"/>
    <link rel="stylesheet" href="bower_components/slickgrid-totals-plugin/src/TotalsPlugin.css" type="text/css"/>
    <link rel="stylesheet" href="stylesheets/grid.css" type="text/css"/>
    <script src="bower_components/slickgrid/lib/jquery-1.7.min.js"></script>
    <script src="bower_components/slickgrid/lib/jquery-ui-1.8.16.custom.min.js"></script>
    <script src="bower_components/slickgrid/lib/jquery.event.drag-2.0.min.js"></script>
    <script src="bower_components/jquery-getscrollbarwidth/jquery.getscrollbarwidth.js"></script>
    <script src="bower_components/slickgrid/slick.core.js"></script>
    <script src="bower_components/slickgrid/slick.grid.js"></script>
    <script src="bower_components/slickgrid/slick.dataview.js"></script>
    <script src="bower_components/slickgrid-totals-plugin/src/TotalsDataView.js"></script>
    <script src="bower_components/slickgrid-totals-plugin/src/TotalsPlugin.js"></script>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Slickgrid-totals-plugin by paynen</title>
</head>

<body>
<div id="container">
    <div class="inner">

        <header>
            <h1>Slickgrid-totals-plugin</h1>

            <h2>Add a totals footer to your grid</h2>
        </header>

        <section id="downloads" class="clearfix">
            <a href="https://github.com/paynen/slickgrid-totals-plugin/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
            <a href="https://github.com/paynen/slickgrid-totals-plugin/tarball/master" id="download-tar-gz"
               class="button"><span>Download .tar.gz</span></a>
            <a href="https://github.com/paynen/slickgrid-totals-plugin" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
            <p>A plugin to add an always visible totals row to <a href="https://github.com/mleibman/SlickGrid/">slickgrid</a>.
            </p>
            <section>
                <h2>Using a data array</h2>
                <p>An example of using a simple array for data.  Try resizing and reordering the columns.</p>
                <p>View source for the code</p>

                <div id="dataGrid" class="grid-container"></div>
                <script>
                    var dataGrid;
                    var columns = [
                        {id: "id", name: "Index", field: "id", hasTotal: true},
                        {id: "title", name: "Title", field: "title"},
                        {id: "duration", name: "Duration", field: "duration", hasTotal: true},
                        {id: "%", name: "% Complete", field: "percentComplete", hasTotal: true},
                        {id: "start", name: "Start", field: "start"},
                        {id: "finish", name: "Finish", field: "finish"},
                        {id: "effort-driven", name: "Effort Driven", field: "effortDriven"}
                    ];

                    var options = {
                        enableCellNavigation: true,
                        enableColumnReorder:  true
                    };

                    $(function () {
                        var data = [];

                        for (var i = 0; i < 500; i++) {
                            data[i] = {
                                id:              i,
                                title:           "Task " + i,
                                duration:        "5",
                                percentComplete: Math.round(Math.random() * 100),
                                start:           "01/01/2009",
                                finish:          "01/05/2009",
                                effortDriven:    (i % 5 == 0)
                            };
                        }

                        var dataWithTotals = new TotalsDataView(data, columns);
                        dataGrid = new Slick.Grid("#dataGrid", dataWithTotals, columns, options);

                        var totalsPlugin = new TotalsPlugin($.getScrollbarWidth());
                        dataGrid.registerPlugin(totalsPlugin);

                    })
                </script>

            </section>

            <section>
                <h2>Using a data view</h2>
                <p>An example of using a <a href="https://github.com/mleibman/SlickGrid/wiki/DataView">slickgrid data view</a>.  The totals will update when adding and removing rows.</p>
                <p>View source for the code</p>

                <div id="dataviewGrid" class="grid-container"></div>
                <button class="add">Add Item</button>
                <button class="remove">Remove Item</button>
                <script>
                    var dataviewGrid;
                    var columns = [
                        {id: "id", name: "Index", field: "id", hasTotal: true},
                        {id: "title", name: "Title", field: "title"},
                        {id: "duration", name: "Duration", field: "duration", hasTotal: true},
                        {id: "%", name: "% Complete", field: "percentComplete", hasTotal: true},
                        {id: "start", name: "Start", field: "start"},
                        {id: "finish", name: "Finish", field: "finish"},
                        {id: "effort-driven", name: "Effort Driven", field: "effortDriven"}
                    ];

                    var options = {
                        enableCellNavigation: true,
                        enableColumnReorder:  true
                    };

                    function createItem(i) {
                        return {
                            id:              i,
                            title:           "Task " + i,
                            duration:        "5",
                            percentComplete: Math.round(Math.random() * 100),
                            start:           "01/01/2009",
                            finish:          "01/05/2009",
                            effortDriven:    (i % 5 == 0)
                        };
                    }

                    $(function () {
                        var data = [];

                        for (var i = 0; i < 500; i++) {
                            data[i] = createItem(i);
                        }

                        var dataView = new Slick.Data.DataView();
                        dataView.setItems(data);

                        var dataProvider = new TotalsDataView(dataView, columns);
                        dataviewGrid = new Slick.Grid("#dataviewGrid", dataProvider, columns, options);

                        var totalsPlugin = new TotalsPlugin($.getScrollbarWidth());
                        dataviewGrid.registerPlugin(totalsPlugin);

                        dataView.onRowCountChanged.subscribe(function (e, args) {
                            dataviewGrid.updateRowCount();
                            dataviewGrid.render();
                            totalsPlugin.render();
                        });

                        dataView.onRowsChanged.subscribe(function (e, args) {
                            dataviewGrid.invalidateRows(args.rows);
                            dataviewGrid.render();
                            totalsPlugin.render();
                        });

                        var id = 0;
                        $('.remove').on('click', function () {
                            dataView.deleteItem(id++)
                        });

                        $('.add').on('click', function () {
                            dataView.insertItem(0, createItem(dataView.getLength()));
                        });

                    })
                </script>

            </section>
        </section>

        <footer>
            Slickgrid-totals-plugin is maintained by <a href="https://github.com/paynen">paynen</a><br>
            This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a
                href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>


    </div>
</div>
</body>
</html>